name: Test

on:
  workflow_dispatch:
    inputs:
      branch-name:
        type: string
        default: test-branch

jobs:
  test:
    permissions: write-all
    runs-on: ubuntu-latest
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v3

      - name: Run a one-line script
        run: |
          echo hello > hello
          echo new-test > test

      - name: Create pull request
        uses: canonical/create-pull-request@main
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: Test commit message
          branch-name: ${{ github.event.inputs.branch-name }}
          title: Test pull request
          body: Test pull request body
          upsert: true
